# 웹 브라우저에 URL을 입력했을 때의 과정

브라우저에 url을 입력하면 데이터를 받아오고, 브라우저에 렌더링 되는 두 가지 과정을 거쳐서 웹 페이지가 보이게 됩니다. 이번 글에서는 데이터를 전달받는 과정에 대해 집중해보겠습니다.

### 브라우저에 도메인 주소를 입력했을 때의 과정

1. **데이터를 받아오는 과정**
2. 브라우저에 렌더링 되는 과정

<br />

### 요약

> www.google.com을 입력했을 때의 상황을 예시로 이해해보겠습니다.
> 
1. 도메인 주소를 DNS 서버에 검색합니다. (google.com)
2. DNS 서버에서 해당 도메인에 해당하는 IP 주소를 찾습니다.
    1. IP 주소는 Recursive Query 과정을 통해 탐색됩니다.
3. 전달 받은 IP 주소를 통해 브라우저가 웹 서버에게 HTML 문서를 요청합니다.
4. WAS와 데이터베이스에서 동적인 웹페이지 작업을 처리합니다.
5. WAS가 웹서버에 작업물을 전달하고, 웹 서버는 브라우저에게 HTML 문서를 전달합니다.

<br />

### 데이터를 받아오는 과정

요약된 과정에 대해 자세히 알아보겠습니다.

1. **브라우저는 DNS 서버에 검색하기 전에 캐싱된 기록을 먼저 확인합니다.**
    1. 만약 도메인 이름에 맞는 IP 주소가 존재한다면, 캐싱된 주소를 반환하고
    2. 그렇지 않다면 DNS 서버에 검색하는 과정을 진행합니다.
2. **가장 가까운 DNS 서버에서 해당 도메인에 해당하는 `IP 주소`를 찾습니다.**
    - ISP(SK 브로드밴드, KT 등)를 통해 IP 주소를 찾기위해 **DNS query를 전달**합니다.
    - **DNS query**는 해당 DNS 서버에 IP 주소가 존재하지 않는다면 다른 DNS 서버를 방문하는 과정을 반복합니다.
    - 이 과정을 **Recursive Query**라고 합니다. URL을 점(.)을 기준으로 뒤에서부터 탐색하는 방법입니다.
        
        예: . → com → google.com
        
3. **전달 받은 IP주소를 이용하여 브라우저가 웹 서버에게 `html 문서를 요청`합니다.**
    - HTTP 요청 메세지는 **TCP/IP 프로토콜을 사용하여 서버로 전송**됩니다.
        - TCP란 전송 제어 프로토콜로 데이터를 어떻게 전송하고 받아올지 정하는 역할을 합니다.
    - IP의 특징인 비신뢰성, 비연결성으로 인해서 신뢰성과 연결성을 책임지는 TCP까지 활용하게 되는 것입니다.
4. **`WAS`와 데이터베이스에서 웹페이지 작업을 처리**
    - WAS: 웹 서버에서 모든 로직과 데이터를 처리할 수 없기 때문에 이를 도와주는 미들웨어
        - 웹 서버의 역할: 정적인 파일(HTML,CSS,Image) 처리
        - WAS의 역할: **동적인 파일(JS, TS) 처리**
    - WAS는 동적인 페이지 처리를 담당하고 DB에서 필요한 데이터를 받아서 그에 맞는 파일을 생성합니다.
5. **WAS의 작업 결과를 웹 서버로 전송하고 웹 서버는 브라우저에게 `HTML 문서를 전달`합니다.**
    - Status Code를 통해 서버 요청에 따른 결과와 상태를 전달

1. 우리가 알고 있는 브라우저 렌더링 과정이 진행됩니다.
